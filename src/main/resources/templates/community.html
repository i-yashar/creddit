<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments/head::head"></head>
<body>

<div th:replace="fragments/navbar :: navbar">
    Navbar
</div>
<div class="container">
    <div class="main-body" th:object="${community}">

        <!-- Breadcrumb -->
        <nav aria-label="breadcrumb" class="main-breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item"><a href="javascript:void(0)">User</a></li>
                <li class="breadcrumb-item active" aria-current="page">User Profile</li>
            </ol>
        </nav>
        <!-- /Breadcrumb -->

        <div class="row gutters-sm">
            <div class="col-md-4 mb-3">
                <div class="communityCard card">
                    <div class="card-body">
                        <div class="d-flex flex-column align-items-center text-center">
                            <img th:src="@{${community.communityPhotoUrl}}" alt="Admin" class="rounded" width="150">
                            <div class="mt-3">
                                <h4 th:text="${community.name}">Community Name</h4>
                                <p class="text-secondary mb-1">Created by: <span th:text="${community.owner}">Owner</span> </p>
                                <a id="joinCommunityBtn" th:href="@{/community/join/{communityName}(communityName = ${#strings.substring(community.name, 1)})}" class="btn btn-primary">Join</a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="communityCard card mt-3">
                    <h5 class="px-4 py-3 text-center">About this community</h5>
                    <div class="p-4 rounded shadow-sm bg-light">
                        <p th:text="${community.description}" class="font-italic mb-0">About</p>
                    </div>
                </div>
            </div>
            <div class="col-md-8">
                <div class="communityCard card mb-3">
                    <div th:each="post : ${posts}" class="post-frame card card-body mt-3 mx-3">
                        <div th:id="${'postNo' + post.id}" class="media align-items-center align-items-lg-start text-center text-lg-left flex-column flex-lg-row">

                            <div class="post-header media-body">
                                <h5 class="media-title font-weight-semibold">
                                    <th:block th:text="${post.title}">Post Title</th:block>
                                </h5>

                                <ul class="post-details list-inline list-inline-dotted mb-3 mb-lg-2">
                                    <li class="list-inline-item">Community:
                                        <a href="#" class="text-muted" data-abc="true" th:text="${post.community}">Community</a>
                                    </li>
                                    <li class="list-inline-item">Posted by:
                                        <a th:href="@{/profile/user/{username}(username = ${post.owner})}" class="text-muted" data-abc="true" th:text="${post.owner}">Owner</a>
                                    </li>
                                </ul>

                                <p class="mb-3 post-description" th:text="${post.description}">Description</p>

                                <ul class="list-inline list-inline-dotted mb-0">
                                    <li class="list-inline-item" sec:authorize="hasRole('ROLE_MODERATOR')"
                                        th:if="${principal.username == post.owner}">
                                        <a class="deleteBtn btn-sm btn btn-primary" th:href="@{/posts/delete/{postId}(postId = ${post.id})}"
                                           role="button">Delete</a>
                                    </li>
                                    <li class="list-inline-item">
                                        <a class="showCommentsBtn btn-sm btn btn-primary"
                                           th:href="@{/posts/comments/{postId}(postId = ${post.id})}"
                                           role="button">Show details</a>
                                    </li>
                                </ul>
                            </div>

                        </div>
                    </div>
                </div>

                <div class="row gutters-sm">
                    <div class="col-sm-6 mb-3">
                        <div class="communityCard card h-100">
                            <div class="card-body">
                                <h6 class="d-flex align-items-center mb-3"><i class="material-icons text-info mr-2">assignment</i>Project Status</h6>
                                <small>Web Design</small>
                                <div class="progress mb-3" style="height: 5px">
                                    <div class="progress-bar bg-primary" role="progressbar" style="width: 80%" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <small>Website Markup</small>
                                <div class="progress mb-3" style="height: 5px">
                                    <div class="progress-bar bg-primary" role="progressbar" style="width: 72%" aria-valuenow="72" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <small>One Page</small>
                                <div class="progress mb-3" style="height: 5px">
                                    <div class="progress-bar bg-primary" role="progressbar" style="width: 89%" aria-valuenow="89" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <small>Mobile Template</small>
                                <div class="progress mb-3" style="height: 5px">
                                    <div class="progress-bar bg-primary" role="progressbar" style="width: 55%" aria-valuenow="55" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <small>Backend API</small>
                                <div class="progress mb-3" style="height: 5px">
                                    <div class="progress-bar bg-primary" role="progressbar" style="width: 66%" aria-valuenow="66" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-6 mb-3">
                        <div class="communityCard card h-100">
                            <div class="card-body">
                                <h6 class="d-flex align-items-center mb-3"><i class="material-icons text-info mr-2">assignment</i>Project Status</h6>
                                <small>Web Design</small>
                                <div class="progress mb-3" style="height: 5px">
                                    <div class="progress-bar bg-primary" role="progressbar" style="width: 80%" aria-valuenow="80" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <small>Website Markup</small>
                                <div class="progress mb-3" style="height: 5px">
                                    <div class="progress-bar bg-primary" role="progressbar" style="width: 72%" aria-valuenow="72" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <small>One Page</small>
                                <div class="progress mb-3" style="height: 5px">
                                    <div class="progress-bar bg-primary" role="progressbar" style="width: 89%" aria-valuenow="89" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <small>Mobile Template</small>
                                <div class="progress mb-3" style="height: 5px">
                                    <div class="progress-bar bg-primary" role="progressbar" style="width: 55%" aria-valuenow="55" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <small>Backend API</small>
                                <div class="progress mb-3" style="height: 5px">
                                    <div class="progress-bar bg-primary" role="progressbar" style="width: 66%" aria-valuenow="66" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>



            </div>
        </div>

    </div>
</div>
</body>
</html>